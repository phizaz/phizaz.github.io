<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.5.0 -->
<title>Cygwin Problems with CR/LF newline | Konpat’s Record of Struggles</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Cygwin Problems with CR/LF newline" />
<meta name="author" content="Konpat Preechakul" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Upon finding this short post, you might have encountered the notoriously newline issue in Windows. The more you try to be UNIX-like on Windows the more the issue pronounces itself. For a prominent example, when you are trying to build some certain program on Windows. You will more than likely to encounter the excess \r problem (or in some circumstances will you see ^M). I am not certainly sure how it happens but it is sure that any native Linux program which we runs on Windows will struggle to understand \r and must fail. So this is where dos2unix and unix2dos commands come in to play. It mitigates the problem if your source of problem comes from the file system itself. But, it is not the only source of problem. Some commands just output with a newline and it might have problems, for example: jupyter --data-dir Which should output the data-dir for jupyter in this case it might be C:\Users\&lt;user&gt;\AppData\Roaming\jupyter, but in practices, it is not, it has a newline, and not only \n conventional newline. It comes with \r\n newline. which becomes a problem when you trying to substitute this command in another command like: $(jupyter --data-dir)/abc You will not get C:\Users\&lt;user&gt;\AppData\Roaming\jupyter/abc as you might have expected. You will rather get C:\Users\&lt;user&gt;\AppData\Roaming\jupyter^M/abc. This breaks the command ! As you can see, it is really a problem and cannot be solved by simply running dos2unix because it is not a file. Fortunately, there is a way to make bash completely ignore \r character. It only works on bash. In .bash_profile # ignore carriage return export SHELLOPTS set -o igncr And then source it source .bash_profile. Now, all the excess \r will be ignored. And now you will be happy :D. The only question persists so far is that: Is there something like this for zsh, which is arguably much superior to bash ? which I have yet to find." />
<meta property="og:description" content="Upon finding this short post, you might have encountered the notoriously newline issue in Windows. The more you try to be UNIX-like on Windows the more the issue pronounces itself. For a prominent example, when you are trying to build some certain program on Windows. You will more than likely to encounter the excess \r problem (or in some circumstances will you see ^M). I am not certainly sure how it happens but it is sure that any native Linux program which we runs on Windows will struggle to understand \r and must fail. So this is where dos2unix and unix2dos commands come in to play. It mitigates the problem if your source of problem comes from the file system itself. But, it is not the only source of problem. Some commands just output with a newline and it might have problems, for example: jupyter --data-dir Which should output the data-dir for jupyter in this case it might be C:\Users\&lt;user&gt;\AppData\Roaming\jupyter, but in practices, it is not, it has a newline, and not only \n conventional newline. It comes with \r\n newline. which becomes a problem when you trying to substitute this command in another command like: $(jupyter --data-dir)/abc You will not get C:\Users\&lt;user&gt;\AppData\Roaming\jupyter/abc as you might have expected. You will rather get C:\Users\&lt;user&gt;\AppData\Roaming\jupyter^M/abc. This breaks the command ! As you can see, it is really a problem and cannot be solved by simply running dos2unix because it is not a file. Fortunately, there is a way to make bash completely ignore \r character. It only works on bash. In .bash_profile # ignore carriage return export SHELLOPTS set -o igncr And then source it source .bash_profile. Now, all the excess \r will be ignored. And now you will be happy :D. The only question persists so far is that: Is there something like this for zsh, which is arguably much superior to bash ? which I have yet to find." />
<link rel="canonical" href="https://blog.konpat.me/dev/2017/06/18/cygwin-problems-with-cr-lf-newline.html" />
<meta property="og:url" content="https://blog.konpat.me/dev/2017/06/18/cygwin-problems-with-cr-lf-newline.html" />
<meta property="og:site_name" content="Konpat’s Record of Struggles" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2017-06-18T07:29:50+07:00" />
<script type="application/ld+json">
{"description":"Upon finding this short post, you might have encountered the notoriously newline issue in Windows. The more you try to be UNIX-like on Windows the more the issue pronounces itself. For a prominent example, when you are trying to build some certain program on Windows. You will more than likely to encounter the excess \\r problem (or in some circumstances will you see ^M). I am not certainly sure how it happens but it is sure that any native Linux program which we runs on Windows will struggle to understand \\r and must fail. So this is where dos2unix and unix2dos commands come in to play. It mitigates the problem if your source of problem comes from the file system itself. But, it is not the only source of problem. Some commands just output with a newline and it might have problems, for example: jupyter --data-dir Which should output the data-dir for jupyter in this case it might be C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\jupyter, but in practices, it is not, it has a newline, and not only \\n conventional newline. It comes with \\r\\n newline. which becomes a problem when you trying to substitute this command in another command like: $(jupyter --data-dir)/abc You will not get C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\jupyter/abc as you might have expected. You will rather get C:\\Users\\&lt;user&gt;\\AppData\\Roaming\\jupyter^M/abc. This breaks the command ! As you can see, it is really a problem and cannot be solved by simply running dos2unix because it is not a file. Fortunately, there is a way to make bash completely ignore \\r character. It only works on bash. In .bash_profile # ignore carriage return export SHELLOPTS set -o igncr And then source it source .bash_profile. Now, all the excess \\r will be ignored. And now you will be happy :D. The only question persists so far is that: Is there something like this for zsh, which is arguably much superior to bash ? which I have yet to find.","author":{"@type":"Person","name":"Konpat Preechakul"},"@type":"BlogPosting","url":"https://blog.konpat.me/dev/2017/06/18/cygwin-problems-with-cr-lf-newline.html","headline":"Cygwin Problems with CR/LF newline","dateModified":"2017-06-18T07:29:50+07:00","datePublished":"2017-06-18T07:29:50+07:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.konpat.me/dev/2017/06/18/cygwin-problems-with-cr-lf-newline.html"},"@context":"http://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://blog.konpat.me/feed.xml" title="Konpat's Record of Struggles" /></head>
<body><header class="site-header">

  <div class="wrapper"><a class="site-title" rel="author" href="/">Konpat&#39;s Record of Struggles</a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>
        
        <div class="trigger">
          <!--
            my_page.autogen is populated by the pagination logic for all pages
                            that are automatically created by the gem. Check for non-existence to exclude pagination pages from site.pages iterators
          -->
          
            
          
            
            <a class="page-link" href="/about/">About</a>
            
          
            
          
            
            <a class="page-link" href="/tags/">Tags</a>
            
          
            
          
            
          
            
            <a class="page-link" href="/all/index.html">All Posts</a>
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
            <a class="page-link" href="/dev/index.html">Development</a>
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
            
          
        </div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">Cygwin Problems with CR/LF newline</h1>
    <p class="post-meta">
      <time class="dt-published" datetime="2017-06-18T07:29:50+07:00" itemprop="datePublished">Jun 18, 2017
      </time></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Upon finding this short post, you might have encountered the notoriously newline issue in Windows. The more you try to be UNIX-like on Windows the more the issue pronounces itself.</p>

<p>For a prominent example, when you are trying to build some certain program on Windows. You will more than likely to encounter the excess <code class="highlighter-rouge">\r</code> problem (or in some circumstances will you see <code class="highlighter-rouge">^M</code>). I am not certainly sure how it happens but it is sure that any native Linux program which we runs on Windows will struggle to understand <code class="highlighter-rouge">\r</code> and must fail.</p>

<p>So this is where <code class="highlighter-rouge">dos2unix</code> and <code class="highlighter-rouge">unix2dos</code> commands come in to play. It mitigates the problem if your source of problem comes from the file system itself.</p>

<p>But, it is not the only source of problem.</p>

<p>Some commands just output with a newline and it might have problems, for example:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>jupyter --data-dir
</code></pre></div></div>

<p>Which should output the <code class="highlighter-rouge">data-dir</code> for <code class="highlighter-rouge">jupyter</code> in this case it might be <code class="highlighter-rouge">C:\Users\&lt;user&gt;\AppData\Roaming\jupyter</code>, but in practices, it is not, it has a newline, and not only <code class="highlighter-rouge">\n</code> conventional newline. It comes with <code class="highlighter-rouge">\r\n</code> newline. which becomes a problem when you trying to substitute this command in another command like:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$(jupyter --data-dir)/abc
</code></pre></div></div>

<p>You will not get <code class="highlighter-rouge">C:\Users\&lt;user&gt;\AppData\Roaming\jupyter/abc</code> as you might have expected. You will rather get <code class="highlighter-rouge">C:\Users\&lt;user&gt;\AppData\Roaming\jupyter^M/abc</code>. This breaks the command !</p>

<p>As you can see, it is really a problem and cannot be solved by simply running <code class="highlighter-rouge">dos2unix</code> because it is not a file.</p>

<p>Fortunately, there is a way to make <code class="highlighter-rouge">bash</code> completely ignore <code class="highlighter-rouge">\r</code> character. It only works on bash.</p>

<p>In <code class="highlighter-rouge">.bash_profile</code></p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># ignore carriage return
export SHELLOPTS
set -o igncr
</code></pre></div></div>

<p>And then source it <code class="highlighter-rouge">source .bash_profile</code>.</p>

<p>Now, all the excess <code class="highlighter-rouge">\r</code> will be ignored. And now you will be happy :D.</p>

<p>The only question persists so far is that: Is there something like this for <code class="highlighter-rouge">zsh</code>, which is arguably much superior to <code class="highlighter-rouge">bash</code> ? which I have yet to find.</p>



    <small>
      
      <a href="/tags/cygwin/">cygwin</a>
      
    </small>
  </div><a class="u-url" href="/dev/2017/06/18/cygwin-problems-with-cr-lf-newline.html" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col one-half">
      <h2 class="footer-heading">Konpat&#39;s Record of Struggles</h2>
        <ul class="contact-list">
          <li class="p-name">Konpat Preechakul</li><li><a class="u-email" href="mailto:the.akita.ta@gmail.com">the.akita.ta@gmail.com</a></li></ul>
      </div>

      <div class="footer-col one-half">
        <p>O thou, I long to rival thy greatest invention, the mind.</p>
      </div>

      <div class="social-links"><ul class="social-media-list"><li><a href="https://www.facebook.com/phizaz" title="phizaz"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#facebook"></use></svg></a></li><li><a href="https://github.com/phizaz" title="phizaz"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a href="https://www.instagram.com/phizaz" title="phizaz"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#instagram"></use></svg></a></li><li><a href="https://twitter.com/phizaz" title="phizaz"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li><li><a href="/feed.xml" title="rss"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#rss"></use></svg></a></li></ul>
</div>
    </div>

  </div>

</footer>
</body>

</html>
